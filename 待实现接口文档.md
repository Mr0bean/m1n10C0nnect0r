# AIèµ„è®¯å¹³å° - å¾…å®ç°æ¥å£æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†åˆ—å‡ºäº†AIèµ„è®¯å¹³å°ä¸­éœ€è¦æ–°å¼€å‘çš„æ¥å£ï¼Œå…±è®¡ **5ä¸ªæ¥å£** åˆ†å¸ƒåœ¨3ä¸ªä¸»è¦åŠŸèƒ½æ¨¡å—ä¸­ã€‚è¿™äº›æ¥å£æ˜¯åœ¨ç°æœ‰å¯å¤ç”¨æ¥å£åŸºç¡€ä¸Šï¼Œä¸ºå®Œå–„å¹³å°åŠŸèƒ½è€Œéœ€è¦é¢å¤–å¼€å‘çš„æ ¸å¿ƒåŠŸèƒ½ã€‚

## ğŸ­ MOCKæ•°æ®å¼€å‘ç­–ç•¥

> **é‡è¦è¯´æ˜**: æ‰€æœ‰ç”¨æˆ·ç›¸å…³æ¥å£å‡é‡‡ç”¨MOCKæ•°æ®è¿›è¡Œå‰ç«¯å¼€å‘ï¼Œç¡®ä¿å‰ç«¯åŠŸèƒ½å®Œæ•´å®ç°åå†å¯¹æ¥çœŸå®åç«¯APIã€‚

### MOCKæ•°æ®ä¼˜åŠ¿
- âœ… **å¹¶è¡Œå¼€å‘**: å‰ç«¯æ— éœ€ç­‰å¾…åç«¯æ¥å£å®Œæˆ
- âœ… **åŠŸèƒ½éªŒè¯**: æå‰éªŒè¯ç”¨æˆ·äº¤äº’æµç¨‹
- âœ… **æ•°æ®ä¸€è‡´**: ç»Ÿä¸€çš„æµ‹è¯•æ•°æ®ä¾¿äºè°ƒè¯•
- âœ… **å¿«é€Ÿè¿­ä»£**: å‰ç«¯å¯ç‹¬ç«‹è¿›è¡ŒUI/UXä¼˜åŒ–

### MOCKæ•°æ®è§„èŒƒ
- ğŸ”§ **æ–‡ä»¶ç»„ç»‡**: ç»Ÿä¸€æ”¾ç½®åœ¨ `mock/` ç›®å½•ä¸‹
- ğŸ”§ **å‘½åè§„èŒƒ**: ä½¿ç”¨ `mock_` å‰ç¼€æ ‡è¯†æµ‹è¯•æ•°æ®
- ğŸ”§ **æ•°æ®çœŸå®**: æ¨¡æ‹ŸçœŸå®ä¸šåŠ¡åœºæ™¯çš„æ•°æ®ç»“æ„
- ğŸ”§ **çŠ¶æ€ç®¡ç†**: æ”¯æŒäº¤äº’æ“ä½œçš„çŠ¶æ€å˜æ›´

### ğŸ“Š å¾…å®ç°æ¥å£ç»Ÿè®¡

| åŠŸèƒ½æ¨¡å— | å¾…å®ç°æ¥å£æ•° | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥æœŸ |
|---------|-------------|--------|----------|
| ç”¨æˆ·è®¤è¯ | 1 | ğŸ”¥ é«˜ | 3å¤© |
| ç”¨æˆ·äº¤äº’ | 1 | âš¡ ä¸­ | 2å¤© |
| è¯„è®ºç³»ç»Ÿ | 3 | âš¡ ä¸­ | 5å¤© |
| **æ€»è®¡** | **5** | - | **10å¤©** |

---

## ğŸ”¥ é«˜ä¼˜å…ˆçº§æ¥å£ï¼ˆé˜»å¡æ€§åŠŸèƒ½ï¼‰

### 1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

#### 1.1 è·å–ç”¨æˆ·ä¿¡æ¯ ğŸ­ MOCKæ•°æ®
**ğŸ”´ å¾…å®ç°**

> **ğŸ“ å¼€å‘è¯´æ˜**: æ­¤æ¥å£ä½¿ç”¨MOCKæ•°æ®è¿›è¡Œå‰ç«¯å¼€å‘ï¼ŒåæœŸæ›¿æ¢ä¸ºçœŸå®API

```http
GET /api/v1/auth/profile
```

**åŠŸèƒ½æè¿°**:
- è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯
- æ”¯æŒJWT Tokenè®¤è¯
- è¿”å›ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€ä¼šå‘˜çŠ¶æ€ç­‰

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json
```

**MOCKå“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": "mock_user_12345",
    "username": "å¼ ä¸‰",
    "email": "zhangsan@thinkin.ai",
    "avatar": "https://api.dicebear.com/7.x/avataaars/svg?seed=å¼ ä¸‰",
    "membership": {
      "type": "premium",
      "expireTime": "2024-12-31T23:59:59Z",
      "badge": "é«˜çº§ä¼šå‘˜"
    },
    "joinTime": "2023-01-15T10:30:00Z",
    "lastLoginTime": "2024-01-15T09:00:00Z",
    "preferences": {
      "theme": "dark",
      "language": "zh-CN",
      "notifications": true
    }
  }
}
```

**å‰ç«¯MOCKå®ç°**:
```javascript
// mock/user.js
export const mockUserProfile = {
  code: 200,
  message: "success",
  data: {
    id: "mock_user_12345",
    username: "å¼ ä¸‰",
    email: "zhangsan@thinkin.ai",
    avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=å¼ ä¸‰",
    membership: {
      type: "premium",
      expireTime: "2024-12-31T23:59:59Z",
      badge: "é«˜çº§ä¼šå‘˜"
    },
    joinTime: "2023-01-15T10:30:00Z",
    lastLoginTime: "2024-01-15T09:00:00Z",
    preferences: {
      theme: "dark",
      language: "zh-CN",
      notifications: true
    }
  }
};
```

**å¼€å‘è¦ç‚¹**:
- [ ] JWT TokenéªŒè¯ä¸­é—´ä»¶
- [ ] ç”¨æˆ·ä¿¡æ¯æ•°æ®æ¨¡å‹è®¾è®¡
- [ ] ä¼šå‘˜çŠ¶æ€ç®¡ç†é€»è¾‘
- [ ] é”™è¯¯å¤„ç†å’Œå®‰å…¨éªŒè¯

**ä¾èµ–å…³ç³»**:
- é˜»å¡å…¶ä»–éœ€è¦ç”¨æˆ·è®¤è¯çš„æ¥å£
- å‰ç«¯ç”¨æˆ·çŠ¶æ€ç®¡ç†çš„åŸºç¡€

---

## âš¡ ä¸­ä¼˜å…ˆçº§æ¥å£ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

### 2. ç”¨æˆ·äº¤äº’åŠŸèƒ½

#### 2.1 æ–‡ç« ç‚¹èµ/å–æ¶ˆç‚¹èµ ğŸ­ MOCKæ•°æ®
**ğŸ”´ å¾…å®ç°**

> **ğŸ“ å¼€å‘è¯´æ˜**: æ­¤æ¥å£ä½¿ç”¨MOCKæ•°æ®è¿›è¡Œå‰ç«¯å¼€å‘ï¼ŒåæœŸæ›¿æ¢ä¸ºçœŸå®API

```http
POST /api/v1/articles/{article_id}/like
```

**åŠŸèƒ½æè¿°**:
- ç”¨æˆ·å¯¹æ–‡ç« è¿›è¡Œç‚¹èµæˆ–å–æ¶ˆç‚¹èµæ“ä½œ
- å®æ—¶æ›´æ–°ç‚¹èµæ•°é‡
- è®°å½•ç”¨æˆ·ç‚¹èµè¡Œä¸º

**è·¯å¾„å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `article_id` | string | æ˜¯ | æ–‡ç« ID |

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json
```

**è¯·æ±‚ä½“**:
```json
{
  "action": "like"  // "like" | "unlike"
}
```

**MOCKå“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "articleId": "article_123",
    "isLiked": true,
    "likeCount": 90,
    "userId": "mock_user_12345",
    "timestamp": "2024-01-15T16:45:00Z"
  }
}
```

**å‰ç«¯MOCKå®ç°**:
```javascript
// mock/articles.js
let mockLikeData = {
  "article_123": { isLiked: false, likeCount: 89 },
  "article_456": { isLiked: true, likeCount: 156 }
};

export const mockArticleLike = (articleId, action) => {
  const current = mockLikeData[articleId] || { isLiked: false, likeCount: 0 };
  
  if (action === 'like' && !current.isLiked) {
    current.isLiked = true;
    current.likeCount += 1;
  } else if (action === 'unlike' && current.isLiked) {
    current.isLiked = false;
    current.likeCount -= 1;
  }
  
  mockLikeData[articleId] = current;
  
  return {
    code: 200,
    message: "æ“ä½œæˆåŠŸ",
    data: {
      articleId: articleId,
      isLiked: current.isLiked,
      likeCount: current.likeCount,
      userId: "mock_user_12345",
      timestamp: new Date().toISOString()
    }
  };
};
```

**å¼€å‘è¦ç‚¹**:
- [ ] ç‚¹èµçŠ¶æ€æ•°æ®è¡¨è®¾è®¡
- [ ] é˜²é‡å¤ç‚¹èµé€»è¾‘
- [ ] ç‚¹èµæ•°é‡å®æ—¶æ›´æ–°
- [ ] ç”¨æˆ·è¡Œä¸ºè®°å½•é›†æˆ

---

### 3. è¯„è®ºç³»ç»Ÿ

#### 3.1 è·å–è¯„è®ºåˆ—è¡¨ ğŸ­ MOCKæ•°æ®
**ğŸ”´ å¾…å®ç°**

> **ğŸ“ å¼€å‘è¯´æ˜**: æ­¤æ¥å£ä½¿ç”¨MOCKæ•°æ®è¿›è¡Œå‰ç«¯å¼€å‘ï¼ŒåæœŸæ›¿æ¢ä¸ºçœŸå®API

```http
GET /api/v1/articles/{article_id}/comments
```

**åŠŸèƒ½æè¿°**:
- è·å–æŒ‡å®šæ–‡ç« çš„è¯„è®ºåˆ—è¡¨
- æ”¯æŒåˆ†é¡µå’Œæ’åº
- æ”¯æŒåµŒå¥—å›å¤æ˜¾ç¤º

**è·¯å¾„å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `article_id` | string | æ˜¯ | æ–‡ç« ID |

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `page` | int | å¦ | 1 | é¡µç  |
| `pageSize` | int | å¦ | 10 | æ¯é¡µæ•°é‡ |
| `sortBy` | string | å¦ | latest | æ’åºæ–¹å¼ |
| `parentId` | string | å¦ | - | çˆ¶è¯„è®ºID (è·å–å›å¤) |

**æ’åºæšä¸¾**:
- `latest`: æœ€æ–°è¯„è®º
- `popular`: çƒ­é—¨è¯„è®º
- `oldest`: æœ€æ—©è¯„è®º

**MOCKå“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 23,
    "page": 1,
    "pageSize": 10,
    "hasNext": true,
    "comments": [
      {
        "id": "mock_comment_001",
        "content": "è¿™ç¯‡æ–‡ç« å†™å¾—å¾ˆå¥½ï¼Œå¯¹å¤šæ™ºèƒ½ä½“åä½œçš„åˆ†æå¾ˆæ·±å…¥ï¼",
        "author": {
          "id": "mock_user_001",
          "name": "æå››",
          "avatar": "https://api.dicebear.com/7.x/avataaars/svg?seed=æå››",
          "level": "é«˜çº§ä¼šå‘˜"
        },
        "createTime": "2024-01-15T17:30:00Z",
        "updateTime": null,
        "likeCount": 5,
        "replyCount": 2,
        "isLiked": false,
        "isAuthor": false,
        "status": "published",
        "replies": [
          {
            "id": "mock_reply_001",
            "content": "åŒæ„Ÿï¼ŒæœŸå¾…æ›´å¤šè¿™æ ·çš„æ·±åº¦åˆ†æ",
            "author": {
              "id": "mock_user_002",
              "name": "ç‹äº”",
              "avatar": "https://api.dicebear.com/7.x/avataaars/svg?seed=ç‹äº”"
            },
            "createTime": "2024-01-15T18:00:00Z",
            "likeCount": 2,
            "isLiked": true
          }
        ]
      }
    ]
  }
}
```

**å‰ç«¯MOCKå®ç°**:
```javascript
// mock/comments.js
export const mockComments = {
  "article_123": [
    {
      id: "mock_comment_001",
      content: "è¿™ç¯‡æ–‡ç« å†™å¾—å¾ˆå¥½ï¼Œå¯¹å¤šæ™ºèƒ½ä½“åä½œçš„åˆ†æå¾ˆæ·±å…¥ï¼",
      author: {
        id: "mock_user_001",
        name: "æå››",
        avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=æå››",
        level: "é«˜çº§ä¼šå‘˜"
      },
      createTime: "2024-01-15T17:30:00Z",
      updateTime: null,
      likeCount: 5,
      replyCount: 2,
      isLiked: false,
      isAuthor: false,
      status: "published",
      replies: [
        {
          id: "mock_reply_001",
          content: "åŒæ„Ÿï¼ŒæœŸå¾…æ›´å¤šè¿™æ ·çš„æ·±åº¦åˆ†æ",
          author: {
            id: "mock_user_002",
            name: "ç‹äº”",
            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=ç‹äº”"
          },
          createTime: "2024-01-15T18:00:00Z",
          likeCount: 2,
          isLiked: true
        }
      ]
    }
  ]
};

export const mockGetComments = (articleId, page = 1, pageSize = 10) => {
  const comments = mockComments[articleId] || [];
  const start = (page - 1) * pageSize;
  const end = start + pageSize;
  
  return {
    code: 200,
    message: "success",
    data: {
      total: comments.length,
      page,
      pageSize,
      hasNext: end < comments.length,
      comments: comments.slice(start, end)
    }
  };
};
```

**å¼€å‘è¦ç‚¹**:
- [ ] è¯„è®ºæ•°æ®è¡¨è®¾è®¡ï¼ˆæ”¯æŒåµŒå¥—å›å¤ï¼‰
- [ ] åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–
- [ ] è¯„è®ºçŠ¶æ€ç®¡ç†ï¼ˆå‘å¸ƒ/å®¡æ ¸/åˆ é™¤ï¼‰
- [ ] ç”¨æˆ·æƒé™éªŒè¯ï¼ˆä½œè€…æ ‡è¯†ï¼‰

#### 3.2 å‘è¡¨è¯„è®º ğŸ­ MOCKæ•°æ®
**ğŸ”´ å¾…å®ç°**

> **ğŸ“ å¼€å‘è¯´æ˜**: æ­¤æ¥å£ä½¿ç”¨MOCKæ•°æ®è¿›è¡Œå‰ç«¯å¼€å‘ï¼ŒåæœŸæ›¿æ¢ä¸ºçœŸå®API

```http
POST /api/v1/articles/{article_id}/comments
```

**åŠŸèƒ½æè¿°**:
- ç”¨æˆ·å‘è¡¨æ–°è¯„è®ºæˆ–å›å¤
- æ”¯æŒ@ç”¨æˆ·åŠŸèƒ½
- è¯„è®ºå†…å®¹å®‰å…¨è¿‡æ»¤

**è·¯å¾„å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `article_id` | string | æ˜¯ | æ–‡ç« ID |

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json
```

**è¯·æ±‚ä½“**:
```json
{
  "content": "è¿™ç¯‡æ–‡ç« å†™å¾—å¾ˆå¥½ï¼",
  "parentId": null,  // å›å¤è¯„è®ºæ—¶å¡«å†™çˆ¶è¯„è®ºID
  "mentions": ["user_123"]  // @ç”¨æˆ·åŠŸèƒ½
}
```

**MOCKå“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è¯„è®ºå‘è¡¨æˆåŠŸ",
  "data": {
    "id": "mock_comment_002",
    "content": "è¿™ç¯‡æ–‡ç« å†™å¾—å¾ˆå¥½ï¼",
    "author": {
      "id": "mock_user_12345",
      "name": "å¼ ä¸‰",
      "avatar": "https://api.dicebear.com/7.x/avataaars/svg?seed=å¼ ä¸‰"
    },
    "createTime": "2024-01-15T19:00:00Z",
    "likeCount": 0,
    "replyCount": 0,
    "isLiked": false,
    "status": "published",
    "parentId": null,
    "mentions": []
  }
}
```

**å‰ç«¯MOCKå®ç°**:
```javascript
// mock/comments.js
export const mockPostComment = (articleId, commentData) => {
  const newComment = {
    id: `mock_comment_${Date.now()}`,
    content: commentData.content,
    author: {
      id: "mock_user_12345",
      name: "å¼ ä¸‰",
      avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=å¼ ä¸‰"
    },
    createTime: new Date().toISOString(),
    likeCount: 0,
    replyCount: 0,
    isLiked: false,
    status: "published",
    parentId: commentData.parentId || null,
    mentions: commentData.mentions || [],
    replies: []
  };
  
  // æ·»åŠ åˆ°mockæ•°æ®ä¸­
  if (!mockComments[articleId]) {
    mockComments[articleId] = [];
  }
  
  if (commentData.parentId) {
    // å¦‚æœæ˜¯å›å¤ï¼Œæ·»åŠ åˆ°å¯¹åº”è¯„è®ºçš„repliesä¸­
    const parentComment = mockComments[articleId].find(c => c.id === commentData.parentId);
    if (parentComment) {
      parentComment.replies.push(newComment);
      parentComment.replyCount += 1;
    }
  } else {
    // å¦‚æœæ˜¯ä¸»è¯„è®ºï¼Œç›´æ¥æ·»åŠ 
    mockComments[articleId].unshift(newComment);
  }
  
  return {
    code: 200,
    message: "è¯„è®ºå‘è¡¨æˆåŠŸ",
    data: newComment
  };
};
```

**å¼€å‘è¦ç‚¹**:
- [ ] è¯„è®ºå†…å®¹éªŒè¯å’Œè¿‡æ»¤
- [ ] @ç”¨æˆ·æé†’åŠŸèƒ½
- [ ] è¯„è®ºå®¡æ ¸æœºåˆ¶
- [ ] é˜²åˆ·è¯„è®ºé™åˆ¶

#### 3.3 è¯„è®ºç‚¹èµ ğŸ­ MOCKæ•°æ®
**ğŸ”´ å¾…å®ç°**

> **ğŸ“ å¼€å‘è¯´æ˜**: æ­¤æ¥å£ä½¿ç”¨MOCKæ•°æ®è¿›è¡Œå‰ç«¯å¼€å‘ï¼ŒåæœŸæ›¿æ¢ä¸ºçœŸå®API

```http
POST /api/v1/comments/{comment_id}/like
```

**åŠŸèƒ½æè¿°**:
- ç”¨æˆ·å¯¹è¯„è®ºè¿›è¡Œç‚¹èµæˆ–å–æ¶ˆç‚¹èµ
- å®æ—¶æ›´æ–°è¯„è®ºç‚¹èµæ•°

**è·¯å¾„å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `comment_id` | string | æ˜¯ | è¯„è®ºID |

**è¯·æ±‚å¤´**:
```http
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json
```

**è¯·æ±‚ä½“**:
```json
{
  "action": "like"  // "like" | "unlike"
}
```

**MOCKå“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "commentId": "mock_comment_001",
    "isLiked": true,
    "likeCount": 6,
    "userId": "mock_user_12345",
    "timestamp": "2024-01-15T19:15:00Z"
  }
}
```

**å‰ç«¯MOCKå®ç°**:
```javascript
// mock/comments.js
let mockCommentLikes = {
  "mock_comment_001": { isLiked: false, likeCount: 5 },
  "mock_reply_001": { isLiked: true, likeCount: 2 }
};

export const mockCommentLike = (commentId, action) => {
  const current = mockCommentLikes[commentId] || { isLiked: false, likeCount: 0 };
  
  if (action === 'like' && !current.isLiked) {
    current.isLiked = true;
    current.likeCount += 1;
  } else if (action === 'unlike' && current.isLiked) {
    current.isLiked = false;
    current.likeCount -= 1;
  }
  
  mockCommentLikes[commentId] = current;
  
  // åŒæ—¶æ›´æ–°mockCommentsä¸­çš„æ•°æ®
  Object.values(mockComments).forEach(articleComments => {
    articleComments.forEach(comment => {
      if (comment.id === commentId) {
        comment.isLiked = current.isLiked;
        comment.likeCount = current.likeCount;
      }
      comment.replies?.forEach(reply => {
        if (reply.id === commentId) {
          reply.isLiked = current.isLiked;
          reply.likeCount = current.likeCount;
        }
      });
    });
  });
  
  return {
    code: 200,
    message: "æ“ä½œæˆåŠŸ",
    data: {
      commentId: commentId,
      isLiked: current.isLiked,
      likeCount: current.likeCount,
      userId: "mock_user_12345",
      timestamp: new Date().toISOString()
    }
  };
};
```

**å¼€å‘è¦ç‚¹**:
- [ ] è¯„è®ºç‚¹èµçŠ¶æ€ç®¡ç†
- [ ] é˜²é‡å¤ç‚¹èµé€»è¾‘
- [ ] ç‚¹èµæ•°é‡ç»Ÿè®¡

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°è¦æ±‚

### æ•°æ®åº“è®¾è®¡

#### ç”¨æˆ·è¡¨ (users)
```sql
CREATE TABLE users (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(50) NOT NULL UNIQUE,
  email VARCHAR(100) NOT NULL UNIQUE,
  avatar VARCHAR(255),
  membership_type ENUM('free', 'basic', 'premium') DEFAULT 'free',
  membership_expire_time DATETIME,
  join_time DATETIME DEFAULT CURRENT_TIMESTAMP,
  last_login_time DATETIME,
  status ENUM('active', 'inactive', 'banned') DEFAULT 'active',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### æ–‡ç« ç‚¹èµè¡¨ (article_likes)
```sql
CREATE TABLE article_likes (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id BIGINT NOT NULL,
  article_id VARCHAR(50) NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  UNIQUE KEY uk_user_article (user_id, article_id),
  INDEX idx_article_id (article_id)
);
```

#### è¯„è®ºè¡¨ (comments)
```sql
CREATE TABLE comments (
  id VARCHAR(50) PRIMARY KEY,
  article_id VARCHAR(50) NOT NULL,
  user_id BIGINT NOT NULL,
  parent_id VARCHAR(50) NULL,
  content TEXT NOT NULL,
  like_count INT DEFAULT 0,
  reply_count INT DEFAULT 0,
  status ENUM('published', 'pending', 'deleted') DEFAULT 'published',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_article_id (article_id),
  INDEX idx_user_id (user_id),
  INDEX idx_parent_id (parent_id)
);
```

#### è¯„è®ºç‚¹èµè¡¨ (comment_likes)
```sql
CREATE TABLE comment_likes (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id BIGINT NOT NULL,
  comment_id VARCHAR(50) NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  UNIQUE KEY uk_user_comment (user_id, comment_id),
  INDEX idx_comment_id (comment_id)
);
```

### å®‰å…¨è¦æ±‚

#### JWT TokenéªŒè¯
- Tokenæœ‰æ•ˆæœŸï¼š24å°æ—¶
- åˆ·æ–°Tokenæœ‰æ•ˆæœŸï¼š7å¤©
- å¯†é’¥è½®è½¬æœºåˆ¶
- Tokené»‘åå•ç®¡ç†

#### å†…å®¹å®‰å…¨
- è¯„è®ºå†…å®¹XSSè¿‡æ»¤
- æ•æ„Ÿè¯æ±‡æ£€æµ‹
- åƒåœ¾è¯„è®ºè¯†åˆ«
- é¢‘ç‡é™åˆ¶æœºåˆ¶

### æ€§èƒ½è¦æ±‚

#### ç¼“å­˜ç­–ç•¥
- ç”¨æˆ·ä¿¡æ¯ç¼“å­˜ï¼š30åˆ†é’Ÿ
- è¯„è®ºåˆ—è¡¨ç¼“å­˜ï¼š2åˆ†é’Ÿ
- ç‚¹èµçŠ¶æ€ç¼“å­˜ï¼š5åˆ†é’Ÿ

#### é™æµè§„åˆ™
- è¯„è®ºå‘è¡¨ï¼š10æ¬¡/åˆ†é’Ÿ
- ç‚¹èµæ“ä½œï¼š30æ¬¡/åˆ†é’Ÿ
- ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢ï¼š100æ¬¡/åˆ†é’Ÿ

---

## ğŸ“‹ å¼€å‘ä»»åŠ¡åˆ†è§£

### ğŸ­ ç¬¬ä¸€é˜¶æ®µï¼šMOCKæ•°æ®å‰ç«¯å¼€å‘ï¼ˆ2å¤©ï¼‰

**Day 1: MOCKæ•°æ®æ¶æ„**
- [ ] åˆ›å»ºç»Ÿä¸€çš„MOCKæ•°æ®æ–‡ä»¶ç»“æ„
- [ ] å®ç°ç”¨æˆ·è®¤è¯MOCKæ¥å£
- [ ] å®ç°æ–‡ç« ç‚¹èµMOCKåŠŸèƒ½

**Day 2: è¯„è®ºç³»ç»ŸMOCK**
- [ ] å®ç°è¯„è®ºç³»ç»ŸMOCKæ¥å£
- [ ] å‰ç«¯äº¤äº’åŠŸèƒ½å®Œæ•´æµ‹è¯•
- [ ] MOCKæ•°æ®çŠ¶æ€ç®¡ç†éªŒè¯

### ğŸ”§ ç¬¬äºŒé˜¶æ®µï¼šç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼ˆ3å¤©ï¼‰

**Day 1: åŸºç¡€æ¶æ„**
- [ ] JWTä¸­é—´ä»¶å¼€å‘
- [ ] ç”¨æˆ·æ•°æ®æ¨¡å‹è®¾è®¡
- [ ] æ•°æ®åº“è¡¨åˆ›å»º

**Day 2: æ ¸å¿ƒåŠŸèƒ½**
- [ ] ç”¨æˆ·ä¿¡æ¯çœŸå®æ¥å£å¼€å‘
- [ ] ä¼šå‘˜çŠ¶æ€ç®¡ç†
- [ ] å•å…ƒæµ‹è¯•ç¼–å†™

**Day 3: é›†æˆæµ‹è¯•**
- [ ] æ¥å£è”è°ƒæµ‹è¯•
- [ ] å®‰å…¨æ€§æµ‹è¯•
- [ ] æ›¿æ¢ç”¨æˆ·è®¤è¯MOCKæ•°æ®

### âš¡ ç¬¬ä¸‰é˜¶æ®µï¼šç”¨æˆ·äº¤äº’åŠŸèƒ½ï¼ˆ2å¤©ï¼‰

**Day 1: ç‚¹èµåŠŸèƒ½**
- [ ] ç‚¹èµæ•°æ®æ¨¡å‹è®¾è®¡
- [ ] ç‚¹èµçœŸå®æ¥å£å¼€å‘
- [ ] é˜²é‡å¤ç‚¹èµé€»è¾‘

**Day 2: æµ‹è¯•ä¼˜åŒ–**
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] æ›¿æ¢ç‚¹èµåŠŸèƒ½MOCKæ•°æ®

### ğŸ’¬ ç¬¬å››é˜¶æ®µï¼šè¯„è®ºç³»ç»Ÿï¼ˆ5å¤©ï¼‰

**Day 1-2: æ•°æ®æ¨¡å‹**
- [ ] è¯„è®ºè¡¨è®¾è®¡
- [ ] åµŒå¥—å›å¤ç»“æ„
- [ ] ç´¢å¼•ä¼˜åŒ–

**Day 3-4: æ ¸å¿ƒåŠŸèƒ½**
- [ ] è¯„è®ºCRUDçœŸå®æ¥å£
- [ ] è¯„è®ºç‚¹èµçœŸå®åŠŸèƒ½
- [ ] @ç”¨æˆ·åŠŸèƒ½

**Day 5: å®‰å…¨ä¸æµ‹è¯•**
- [ ] å†…å®¹å®‰å…¨è¿‡æ»¤
- [ ] è¯„è®ºå®¡æ ¸æœºåˆ¶
- [ ] æ›¿æ¢è¯„è®ºç³»ç»ŸMOCKæ•°æ®

### ğŸ”„ ç¬¬äº”é˜¶æ®µï¼šæ¥å£å¯¹æ¥ä¸ä¼˜åŒ–ï¼ˆ1å¤©ï¼‰

**Day 1: æœ€ç»ˆå¯¹æ¥**
- [ ] å‰ç«¯APIè°ƒç”¨åˆ‡æ¢é…ç½®
- [ ] çœŸå®æ¥å£è”è°ƒæµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œé”™è¯¯å¤„ç†
- [ ] ç§»é™¤MOCKæ•°æ®ä»£ç 

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### ç”¨æˆ·è®¤è¯æµ‹è¯•

```javascript
// æµ‹è¯•ç”¨ä¾‹ï¼šè·å–ç”¨æˆ·ä¿¡æ¯
describe('GET /api/v1/auth/profile', () => {
  it('åº”è¯¥è¿”å›ç”¨æˆ·ä¿¡æ¯å½“Tokenæœ‰æ•ˆæ—¶', async () => {
    const response = await request(app)
      .get('/api/v1/auth/profile')
      .set('Authorization', 'Bearer valid_token')
      .expect(200);
    
    expect(response.body.data).toHaveProperty('id');
    expect(response.body.data).toHaveProperty('username');
    expect(response.body.data).toHaveProperty('membership');
  });
  
  it('åº”è¯¥è¿”å›401å½“Tokenæ— æ•ˆæ—¶', async () => {
    await request(app)
      .get('/api/v1/auth/profile')
      .set('Authorization', 'Bearer invalid_token')
      .expect(401);
  });
});
```

### ç‚¹èµåŠŸèƒ½æµ‹è¯•

```javascript
// æµ‹è¯•ç”¨ä¾‹ï¼šæ–‡ç« ç‚¹èµ
describe('POST /api/v1/articles/:id/like', () => {
  it('åº”è¯¥æˆåŠŸç‚¹èµæ–‡ç« ', async () => {
    const response = await request(app)
      .post('/api/v1/articles/article_001/like')
      .set('Authorization', 'Bearer valid_token')
      .send({ action: 'like' })
      .expect(200);
    
    expect(response.body.data.isLiked).toBe(true);
    expect(response.body.data.likeCount).toBeGreaterThan(0);
  });
  
  it('åº”è¯¥é˜²æ­¢é‡å¤ç‚¹èµ', async () => {
    // ç¬¬ä¸€æ¬¡ç‚¹èµ
    await request(app)
      .post('/api/v1/articles/article_001/like')
      .set('Authorization', 'Bearer valid_token')
      .send({ action: 'like' });
    
    // ç¬¬äºŒæ¬¡ç‚¹èµåº”è¯¥æ— æ•ˆæœ
    const response = await request(app)
      .post('/api/v1/articles/article_001/like')
      .set('Authorization', 'Bearer valid_token')
      .send({ action: 'like' })
      .expect(200);
    
    expect(response.body.data.isLiked).toBe(true);
  });
});
```

### è¯„è®ºåŠŸèƒ½æµ‹è¯•

```javascript
// æµ‹è¯•ç”¨ä¾‹ï¼šå‘è¡¨è¯„è®º
describe('POST /api/v1/articles/:id/comments', () => {
  it('åº”è¯¥æˆåŠŸå‘è¡¨è¯„è®º', async () => {
    const response = await request(app)
      .post('/api/v1/articles/article_001/comments')
      .set('Authorization', 'Bearer valid_token')
      .send({
        content: 'è¿™æ˜¯ä¸€æ¡æµ‹è¯•è¯„è®º',
        parentId: null
      })
      .expect(200);
    
    expect(response.body.data).toHaveProperty('id');
    expect(response.body.data.content).toBe('è¿™æ˜¯ä¸€æ¡æµ‹è¯•è¯„è®º');
  });
  
  it('åº”è¯¥æ‹’ç»ç©ºå†…å®¹è¯„è®º', async () => {
    await request(app)
      .post('/api/v1/articles/article_001/comments')
      .set('Authorization', 'Bearer valid_token')
      .send({ content: '' })
      .expect(400);
  });
});
```

---

## ğŸ“š å‚è€ƒèµ„æ–™

### æŠ€æœ¯æ–‡æ¡£
- [JWTå®˜æ–¹æ–‡æ¡£](https://jwt.io/)
- [Express.jså®‰å…¨æœ€ä½³å®è·µ](https://expressjs.com/en/advanced/best-practice-security.html)
- [MySQLç´¢å¼•ä¼˜åŒ–æŒ‡å—](https://dev.mysql.com/doc/refman/8.0/en/optimization-indexes.html)

### ä»£ç è§„èŒƒ
- [Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript)
- [RESTful APIè®¾è®¡è§„èŒƒ](https://restfulapi.net/)
- [HTTPçŠ¶æ€ç ä½¿ç”¨æŒ‡å—](https://httpstatuses.com/)

---

## ğŸ“ è”ç³»æ–¹å¼

- **å¼€å‘è´Ÿè´£äºº**: åç«¯å¼€å‘å›¢é˜Ÿ
- **æŠ€æœ¯æ”¯æŒ**: APIå¼€å‘å°ç»„
- **é—®é¢˜åé¦ˆ**: [é¡¹ç›®Issues](https://github.com/your-org/newsletter-api/issues)
- **å¼€å‘è®¨è®º**: [å¼€å‘è€…ç¾¤ç»„](https://your-org.slack.com/channels/backend-dev)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2024-01-15  
**é¢„è®¡å®Œæˆ**: 2024-01-25